(function() {
  var Clock, Game, Input, Sprite, base, canvas, clock, game, loader, map, render, spritesheet, tg, utils;

  console.log("%cAdvanced Wars Clone", "color: #c88");

  require("./_rafPolyfill");

  utils = require("./_utils");

  Sprite = require("./_sprites");

  map = require("./_map");

  Input = require("./_input");

  Clock = require("./_clock");

  Game = function(canvas, width, height) {
    this.canvas = canvas;
    this.width = width;
    this.height = height;
    this.width = this.width || window.innerWidth;
    this.height = this.height || this.width || window.innerHeight;
    this.context = this.canvas.getContext("2d");
    this.context.fillStyle = "#4a8";
    this.canvas.width = this.width;
    this.canvas.height = this.height;
    this.context.fillRect(0, 0, this.width, this.height);
    this.Layer = new utils.Queue();
    return this;
  };

  /*   TESTING
  */


  canvas = document.getElementById("game");

  game = new Game(canvas, 500);

  Sprite.prototype.game = game;

  Sprite.prototype.ctx = game.context;

  console.log(game);

  clock = new Clock();

  spritesheet = "NOT LOADED";

  tg = "NOT LOADED";

  render = function() {
    return console.log();
  };

  base = "sprites/";

  loader = new utils.ImageLoader([base + "AWspritesheet.png"], function(e) {
    var input, movementAmount, _i, _results;
    spritesheet = e[0];
    tg = new map.TileGrid(game, (function() {
      _results = [];
      for (_i = 1; _i <= 64; _i++){ _results.push(_i); }
      return _results;
    }).apply(this), {
      width: 15,
      height: 15
    });
    tg.render();
    movementAmount = 1;
    input = new Input(document);
    input.on("keydown", "up", function(e) {
      return tg.move(0, (-1) * movementAmount);
    });
    input.on("keydown", "down", function(e) {
      return tg.move(0, movementAmount);
    });
    input.on("keydown", "left", function(e) {
      return tg.move((-1) * movementAmount, 0);
    });
    input.on("keydown", "right", function(e) {
      return tg.move(movementAmount, 0);
    });
    render = function() {
      console.log("super wow");
      return tg.render();
    };
    clock.on("tick", render);
    return clock.start();
  });

}).call(this);

// Generated by CoffeeScript 1.5.0-pre
